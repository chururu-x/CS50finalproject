CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    first_name TEXT NOT NULL,
    last_name TEXT NOT NULL,
    email TEXT NOT NULL,
    hash TEXT NOT NULL
);

CREATE TABLE sqlite_sequence(name,seq);

CREATE UNIQUE INDEX email ON users (email);

CREATE TABLE classes (
    id INTEGER PRIMARY KEY,
    class TEXT NOT NULL
, price INTEGER);

CREATE TABLE timings (
    id INTEGER PRIMARY KEY,
    timing TEXT NOT NULL,
    term TEXT NOT NULL,
    year TEXT NOT NULL,
    class_id INTEGER NOT NULL, booking_count INTEGER DEFAULT 0,
    FOREIGN KEY(class_id) REFERENCES classes(id)
);

CREATE TABLE reviews (
    id INTEGER PRIMARY KEY,
    name TEXT NOT NULL,
    review TEXT NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
, rating INTEGER);

CREATE TABLE IF NOT EXISTS "bookings" (
    id INTEGER PRIMARY KEY,
    timing_id INTEGER NOT NULL,
    user_id INTEGER NOT NULL,
    class_id INTEGER NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY(timing_id) REFERENCES timings(id),
    FOREIGN KEY(user_id) REFERENCES users(id),
    FOREIGN KEY(class_id) REFERENCES classes(id)
);
